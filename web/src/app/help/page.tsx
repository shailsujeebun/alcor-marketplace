'use client';

import { useState } from 'react';
import { ChevronDown, HelpCircle } from 'lucide-react';
import { cn } from '@/lib/utils';
import Link from 'next/link';

const FAQ_ITEMS = [
  {
    category: 'Загальні питання',
    items: [
      {
        question: 'Як зареєструватися на платформі?',
        answer: 'Для реєстрації натисніть кнопку "Увійти" у правому верхньому куті сайту, потім оберіть "Створити акаунт". Заповніть форму реєстрації, вказавши електронну пошту, пароль та основну інформацію про вашу компанію. Після підтвердження email ви зможете користуватися всіма функціями платформи.'
      },
      {
        question: 'Чи безкоштовно користуватися платформою?',
        answer: 'Базова реєстрація та перегляд оголошень є повністю безкоштовними. Розміщення оголошень доступне за різними тарифними планами залежно від ваших потреб. Детальніше про тарифи ви можете дізнатися у розділі "Тарифи та послуги".'
      },
      {
        question: 'Як змінити мову інтерфейсу?',
        answer: 'Наразі платформа підтримує українську мову як основну. Ми працюємо над додаванням англійської та інших мов інтерфейсу. Перемикач мови з\'явиться у верхній панелі після впровадження мультимовності.'
      }
    ]
  },
  {
    category: 'Оголошення',
    items: [
      {
        question: 'Як створити оголошення про продаж техніки?',
        answer: 'Увійдіть в особистий кабінет, перейдіть в розділ "Мої оголошення" та натисніть "Додати оголошення". Заповніть всі обов\'язкові поля: назву, категорію, бренд, стан техніки, ціну та детальний опис. Додайте якісні фотографії (мінімум 3-5 знімків). Після модерації ваше оголошення буде опубліковане.'
      },
      {
        question: 'Скільки часу займає модерація оголошення?',
        answer: 'Стандартний термін модерації становить від 2 до 24 годин у робочі дні. Оголошення перевіряються на відповідність правилам платформи, достовірність інформації та якість фотографій. Ви отримаєте повідомлення про публікацію або необхідність внести правки.'
      },
      {
        question: 'Скільки фотографій можна додати до оголошення?',
        answer: 'У базовому тарифі ви можете додати до 10 фотографій до одного оголошення. У преміум тарифі ліміт збільшується до 30 фотографій. Також доступне додавання відео-оглядів техніки. Рекомендуємо завантажувати фото у високій роздільній здатності для кращого відображення.'
      }
    ]
  },
  {
    category: 'Компанії',
    items: [
      {
        question: 'Як отримати статус офіційного дилера?',
        answer: 'Для отримання статусу офіційного дилера необхідно надати документи, що підтверджують партнерство з виробником (дилерський договір, сертифікат офіційного представника). Завантажте документи через форму верифікації у розділі "Налаштування компанії". Перевірка займає 3-5 робочих днів.'
      },
      {
        question: 'Як додати відгук про компанію?',
        answer: 'Відгуки можуть залишати лише зареєстровані користувачі, які мали досвід співпраці з компанією. Перейдіть на сторінку компанії, прокрутіть до розділу "Відгуки" та натисніть "Написати відгук". Оцініть компанію за 5-бальною шкалою та опишіть свій досвід. Всі відгуки проходять модерацію.'
      },
      {
        question: 'Чи можна змінити назву компанії після реєстрації?',
        answer: 'Так, ви можете змінити назву компанії у розділі "Налаштування компанії". Зверніть увагу, що зміна назви може вплинути на ваш унікальний URL (slug). Після зміни назви потрібна повторна верифікація для збереження статусу "Верифікована компанія".'
      }
    ]
  },
  {
    category: 'Оплата та тарифи',
    items: [
      {
        question: 'Які методи оплати підтримуються?',
        answer: 'Ми приймаємо оплату банківськими картами (Visa, MasterCard), банківськими переказами та електронними гаманцями. Для юридичних осіб доступна оплата за рахунком з ПДВ. Всі платежі захищені та проходять через сертифіковані платіжні системи.'
      },
      {
        question: 'Чи можна повернути гроші за тариф?',
        answer: 'Повернення коштів можливе протягом 14 днів з моменту оплати, якщо послуги не були використані. Для оформлення повернення зверніться до служби підтримки через форму зворотного зв\'язку або email. Кошти повертаються тим же способом, яким була здійснена оплата, протягом 5-10 робочих днів.'
      },
      {
        question: 'Чи є знижки для великих компаній?',
        answer: 'Так, ми пропонуємо корпоративні тарифи та спеціальні умови для компаній з великим обсягом оголошень (від 50+ одиниць техніки). Також діють сезонні акції та знижки для офіційних дилерів. Для обговорення індивідуальних умов зв\'яжіться з нашим менеджером.'
      }
    ]
  },
  {
    category: 'Безпека',
    items: [
      {
        question: 'Як уникнути шахрайства при купівлі техніки?',
        answer: 'Завжди перевіряйте верифікацію продавця (зелена галочка біля назви). Зустрічайтеся особисто для огляду техніки. Не переводьте передоплату на приватні картки без офіційних документів. Вимагайте договір купівлі-продажу. Перевіряйте техпаспорт та історію обслуговування. Уникайте підозріло низьких цін.'
      },
      {
        question: 'Як поскаржитися на підозріле оголошення?',
        answer: 'На кожній сторінці оголошення є кнопка "Поскаржитися" (прапорець). Оберіть причину скарги: шахрайство, неправдива інформація, дублікат, недозволений контент тощо. Опишіть суть проблеми. Наша команда розгляне скаргу протягом 24 годин та вживе відповідних заходів.'
      },
      {
        question: 'Чи захищені мої персональні дані?',
        answer: 'Так, ми використовуємо сучасні технології шифрування SSL/TLS для захисту ваших даних. Персональна інформація зберігається на захищених серверах і не передається третім сторонам без вашої згоди. Детальніше про обробку даних читайте у нашій Політиці конфіденційності.'
      }
    ]
  }
];

interface FAQItemProps {
  question: string;
  answer: string;
}

function FAQItem({ question, answer }: FAQItemProps) {
  const [isOpen, setIsOpen] = useState(false);

  return (
    <div className="border-b border-[var(--border-color)] last:border-b-0">
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="w-full py-4 flex items-center justify-between gap-4 text-left hover:text-blue-bright transition-colors"
      >
        <span className="font-medium text-[var(--text-primary)]">{question}</span>
        <ChevronDown
          className={cn(
            'w-5 h-5 text-blue-bright flex-shrink-0 transition-transform duration-300',
            isOpen && 'rotate-180'
          )}
        />
      </button>
      <div
        className={cn(
          'overflow-hidden transition-all duration-300',
          isOpen ? 'max-h-96 pb-4' : 'max-h-0'
        )}
      >
        <p className="text-[var(--text-secondary)] leading-relaxed">{answer}</p>
      </div>
    </div>
  );
}

export default function HelpPage() {
  return (
    <div className="container-main section-padding">
      <div className="max-w-4xl mx-auto">
        <div className="flex items-center justify-center gap-3 mb-8" data-aos="fade-up">
          <HelpCircle className="w-10 h-10 text-blue-bright" />
          <h1 className="text-4xl md:text-5xl font-heading font-bold gradient-text text-center">
            Центр допомоги
          </h1>
        </div>

        <p
          className="text-center text-[var(--text-secondary)] text-lg mb-12 max-w-2xl mx-auto"
          data-aos="fade-up"
          data-aos-delay="50"
        >
          Знайдіть відповіді на найпоширеніші питання про роботу з платформою
        </p>

        <div className="space-y-6">
          {FAQ_ITEMS.map((category, idx) => (
            <div
              key={category.category}
              className="glass-card p-6 md:p-8"
              data-aos="fade-up"
              data-aos-delay={idx * 50}
            >
              <h2 className="text-2xl font-heading font-bold text-[var(--text-primary)] mb-6">
                {category.category}
              </h2>
              <div className="space-y-0">
                {category.items.map((item, itemIdx) => (
                  <FAQItem key={itemIdx} question={item.question} answer={item.answer} />
                ))}
              </div>
            </div>
          ))}
        </div>

        {/* Contact CTA */}
        <div
          className="glass-card p-8 text-center mt-12"
          data-aos="fade-up"
          data-aos-delay="300"
        >
          <h3 className="text-xl font-heading font-bold text-[var(--text-primary)] mb-3">
            Не знайшли відповідь?
          </h3>
          <p className="text-[var(--text-secondary)] mb-6">
            Наша служба підтримки готова допомогти вам у будь-який час
          </p>
          <Link
            href="/cabinet/support"
            className="inline-flex items-center justify-center px-8 py-3 rounded-lg gradient-cta text-white font-semibold hover:opacity-90 transition-all"
          >
            Зв'язатися з підтримкою
          </Link>
        </div>
      </div>
    </div>
  );
}
